# Домашнее задание к занятию «Базы данных, их типы»


### Задание 1. СУБД

### Кейс
Крупная строительная компания, которая также занимается проектированием и девелопментом, решила создать 
правильную архитектуру для работы с данными. Ниже представлены задачи, которые необходимо решить для
каждой предметной области. 

Какие типы СУБД, на ваш взгляд, лучше всего подойдут для решения этих задач и почему? 
 
1.1. Бюджетирование проектов с дальнейшим формированием финансовых аналитических отчётов и прогнозирования рисков.
СУБД должна гарантировать целостность и чёткую структуру данных.   
Для задач бюджетирования, формирования аналитических отчётов и прогнозирования рисков лучше всего подойдут реляционные СУБД (например, PostgreSQL , MySQL или Microsoft SQL Server ). Эти системы обеспечивают строгую структуру данных, гарантируют целостность (благодаря транзакциям и ACID-свойствам).


1.1.* Хеширование стало занимать длительно время, какое API можно использовать для ускорения работы?    
Для ускорения хеширования можно использовать Redis : Это in-memory база данных, которая может использоваться для кэширования данных и ускорения операций хеширования


1.2. Под каждый девелоперский проект создаётся отдельный лендинг, и все данные по лидам стекаются в CRM к 
маркетологам и менеджерам по продажам. Какой тип СУБД лучше использовать для лендингов и для CRM? 
СУБД должны быть гибкими и быстрыми.   
Для лендингов и CRM лучше использовать гибридные решения :    
NoSQL СУБД (например, MongoDB) : Для лендингов, где важна гибкость схемы данных и быстрая запись информации о лидирующих пользователях.   
Реляционные СУБД (например, PostgreSQL) : Для CRM, где требуется строгая структура данных и возможность выполнения сложных запросов для анализа лидов.   

1.2.* Можно ли эту задачу закрыть одной СУБД? И если да, то какой именно СУБД и какой реализацией?  
Да, можно использовать одну универсальную СУБД, например, PostgreSQL . PostgreSQL поддерживает JSON/JSONB для работы с полуструктурированными данными (как NoSQL) и при этом предоставляет все преимущества реляционной модели. Реализация:  
JSONB для хранения данных с лендингов.  
Реляционные таблицы для CRM.  

1.3. Отдел контроля качества решил создать базу по корпоративным нормам и правилам, обучающему материалу 
и так далее, сформированную согласно структуре компании. СУБД должна иметь простую и понятную структуру.
Для этой задачи лучше всего подойдёт реляционная СУБД , так как данные имеют чёткую структуру (правила, нормы, обучающие материалы). Например, PostgreSQL  

1.3.* Можно ли под эту задачу использовать уже существующую СУБД из задач выше и если да, то как лучше это 
реализовать?
Да, можно использовать ту же PostgreSQL , которую применяли для CRM или бюджетирования. Реализация:   
Создание отдельной схемы (schema) для данных по нормам и правилам.   
Использование ролей для ограничения доступа к этим данным.  

1.4. Департамент логистики нуждается в решении задач по быстрому формированию маршрутов доставки материалов 
по объектам и распределению курьеров по маршрутам с доставкой документов. СУБД должна уметь быстро работать
со связями.   
Для задач логистики лучше использовать графовые СУБД (например, Neo4j ) или реляционные СУБД с поддержкой графовых запросов (например, PostgreSQL с расширением pgRouting ).   
Почему графовые СУБД?   
Графовые СУБД отлично подходят для работы со связями (например, маршруты, объекты, курьеры).   
Neo4j предоставляет интуитивно понятный язык запросов Cypher для работы с графами.   

1.4.* Можно ли к этой СУБД подключить отдел закупок или для них лучше сформировать свою СУБД в связке с СУБД 
логистов?  
Да, можно интегрировать отдел закупок с логистикой в одной СУБД. Например:    
В PostgreSQL можно создать отдельные таблицы для данных по закупкам и связать их с таблицами логистики через внешние ключи.   
В Neo4j можно добавить узлы для данных по закупкам и связать их с узлами логистики.   

1.5.* Можно ли все перечисленные выше задачи решить, используя одну СУБД? Если да, то какую именно?   
Да, все задачи можно решить с помощью одной универсальной СУБД — PostgreSQL . PostgreSQL сочетает в себе возможности реляционной, документоориентированной и графовой моделей данных    
. Реализация:   
Бюджетирование : Реляционные таблицы для хранения финансовых данных.   
Лендинги и CRM : JSONB для лендингов, реляционные таблицы для CRM.   
Корпоративные нормы : Отдельная схема для данных по нормам и правилам.   
Логистика и закупки : Расширение pgRouting для маршрутов, таблицы для данных по закупкам.   
Преимущества PostgreSQL :    
Масштабируемость и надёжность  
Поддержка различных типов данных (JSONB, графы).
Интеграция с BI-инструментами и API для аналитики.

---

### Задание 2. Транзакции

2.1. Пользователь пополняет баланс счёта телефона, распишите пошагово, какие действия должны произойти для того, чтобы 
транзакция завершилась успешно. Ориентируйтесь на шесть действий.
Для успешного завершения транзакции пополнения баланса счёта телефона необходимо выполнить следующие шесть шагов:  
Инициация транзакции :   
Пользователь вводит номер телефона, сумму пополнения и выбирает способ оплаты (например, банковская карта)   
Аутентификация пользователя :   
Если платёж выполняется через банковскую карту, пользователь проходит аутентификацию (ввод CVV-кода, подтверждение через SMS или push-уведомление).   
Проверка баланса/средств :   
Система проверяет наличие достаточных средств на счёте отправителя. Если средств недостаточно, транзакция отклоняется.   
Резервирование средств :  
Сумма платежа временно блокируется на счёте отправителя, чтобы избежать повторного использования средств.    
Резервирование обеспечивает целостность транзакции.     
Перевод средств на счёт оператора связи :  
Блокированные средства переводятся на счёт оператора связи, который затем зачисляет их на баланс телефона пользователя.   
Оператор связи обрабатывает запрос и увеличивает баланс абонента.   
Подтверждение успешной транзакции :    
Пользователь получает уведомление (SMS, push-уведомление), подтверждающее успешное пополнение баланса.   
Пояснение : Это завершающий этап, который информирует пользователя о статусе операции.    

2.1.* Какие действия должны произойти, если пополнение счёта телефона происходило бы через автоплатёж?
Пользователь настраивает автоплатёж в личном кабинете банка или мобильного приложения, указывая параметры (например, минимальный баланс для пополнения и сумму) 
Автоплатёж автоматически активируется, когда баланс телефона падает ниже указанного уровня.  
Мониторинг баланса телефона :   
Система оператора связи регулярно проверяет баланс телефона пользователя. Если баланс достигает порогового значения, оператор отправляет запрос на пополнение.  
Это позволяет своевременно восполнять баланс без участия пользователя.   
Инициация транзакции :   
Банк, обслуживающий автоплатёж, инициирует транзакцию на основе запроса оператора связи.   
Транзакция выполняется автоматически, без дополнительного подтверждения пользователя.   
Проверка баланса банковского счёта :   
Банк проверяет наличие средств на счёте пользователя. Если средств недостаточно, автоплатёж отменяется.   
Это гарантирует, что платежи не будут выполняться при отсутствии средств.   
Перевод средств на счёт оператора связи :   
Средства переводятся на счёт оператора связи, который увеличивает баланс телефона пользователя.   
Уведомление пользователя : Пользователь получает уведомление о том, что автоплатёж был выполнен успешно.

---

### Задание 3. SQL vs NoSQL

3.1. Напишите пять преимуществ SQL-систем по отношению к NoSQL. 
1. Возможности для сложных запросов :
SQL предоставляет язык запросов, который позволяет выполнять сложные операции с данными, такие как JOIN, агрегация и вложенные запросы. Это особенно важно для аналитики и бизнес-логики

2. Гарантия целостности данных (ACID) :
SQL-системы обеспечивают строгую целостность данных благодаря поддержке ACID-свойств (атомарность, согласованность, изолированность, долговечность). Это критично для финансовых и транзакционных систем   
  
3. Стандартизация :  
SQL является стандартным языком для работы с реляционными базами данных, что упрощает обучение, интеграцию и миграцию между различными СУБД  

4.Оптимизация производительности для структурированных данных :   
Реляционные базы данных оптимизированы для работы со структурированными данными, что обеспечивает высокую скорость выполнения запросов при правильном проектировании   
   
5. Поддержка сложных транзакций :   
SQL-системы поддерживают многошаговые транзакции, что позволяет выполнять сложные операции с возможностью отката в случае ошибки    
    
3.1.* Какие, на ваш взгляд, преимущества у NewSQL систем перед SQL и NoSQL.

NewSQL системы сочетают в себе лучшие черты SQL и NoSQL, предлагая следующие преимущества:
1.Масштабируемость, как у NoSQL :
NewSQL системы поддерживают горизонтальное масштабирование, что делает их более гибкими и экономически эффективными по сравнению с традиционными SQL-системами    

2.Сохранение ACID-свойств :
В отличие от многих NoSQL систем, NewSQL сохраняет поддержку ACID-свойств, что делает их подходящими для транзакционных задач    

3.Высокая производительность для транзакций :   
NewSQL системы оптимизированы для обработки большого количества транзакций в реальном времени, что делает их идеальными для высоконагруженных приложений   

4. Поддержка SQL-запросов :   
NewSQL системы поддерживают стандартный SQL, что упрощает миграцию с традиционных SQL-систем и позволяет использовать существующие навыки разработчиков    

5.Универсальность :
NewSQL системы могут работать как с транзакционными, так и с аналитическими нагрузками, что делает их универсальным решением для различных задач    


---

### Задание 4. Кластеры

Необходимо производить большое количество вычислений при работе с огромным количеством данных, под эту задачу 
выделено 1000 машин. 

На основе какого критерия будете выбирать тип СУБД и какая модель *распределённых вычислений* 
здесь справится лучше всего и почему?

Для задачи, связанной с обработкой огромного количества данных и выполнением большого числа вычислений на 1000 машинах, основным критерием выбора СУБД будет масштабируемость .
Реляционные СУБД (SQL) :  Традиционные реляционные СУБД плохо масштабируются горизонтально, так как они изначально разрабатывались для работы на одной машине или небольшом количестве узлов. Это делает их менее подходящими для задач с большим объёмом данных.   
NoSQL СУБД : NoSQL системы, такие как Cassandra, MongoDB, поддерживают горизонтальное масштабирование и могут эффективно работать с тысячами узлов. Они идеально подходят для задач с большим объёмом данных и высокой нагрузкой    

Критерий выбора СУБД :  
Основной критерий — горизонтальная масштабируемость . Для данной задачи лучше всего подойдут NoSQL или NewSQL системы.   
    
Модель распределённых вычислений   
Для обработки огромного количества данных на 1000 машинах лучше всего подходит модель MapReduce или её современные реализации, такие как Apache Spark .   

Почему MapReduce или Apache Spark?   
Горизонтальное масштабирование :   
Эти модели позволяют эффективно распределять вычисления между большим количеством узлов, что соответствует требованиям задачи   
Обработка больших данных :   
MapReduce и Spark специально разработаны для работы с большими данными. Они поддерживают параллельную обработку данных и могут работать с терабайтами или петабайтами информации    
Устойчивость к сбоям :  
В распределённых системах вероятность сбоев высока. MapReduce и Spark обеспечивают автоматическое восстановление после сбоев, что важно при работе с 1000 машинами    
Поддержка различных операций :   
Spark предоставляет широкий набор инструментов для анализа данных, включая SQL-подобные запросы, потоковую обработку и машинное обучение    
Производительность :   
В отличие от классического MapReduce, Apache Spark использует in-memory обработку данных, что значительно ускоряет выполнение задач     

---

Задания,помеченные звёздочкой, — дополнительные, то есть не обязательные к выполнению, и никак не повлияют на получение вами зачёта по этому домашнему заданию. Вы можете их выполнить, если хотите глубже разобраться в материале.
